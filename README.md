# MUF: Memory Unit Framework

## プロジェクトの概要

MUF（Memory Unit Framework）は、分散システムにおけるユニット間の連携を「メッセージの送受信」ではなく「共有メモリの状態同期」として再定義する次世代のフレームワークです。産業用コントローラ（PLC）における共有メモリやレジスタ操作の直感的な概念をネットワーク空間へと拡張し、各ユニットが独立して共通のメモリ空間を読み書きすることで、極めて疎結合で自律的なシステム連携を実現します。Redisを高速なバッファ基盤として活用することで、開発者は複雑なAPIの設計や通信プロトコルの詳細を意識することなく、変数を操作するような手軽さで高度な分散処理を記述できます。

---

## ディレクトリ構成と各ユニットの役割

本プロジェクトは複数の独立したコンポーネントによって構成されています。各コンポーネントは特定の責務を持ち、必要に応じて「ポン付け」でシステムに追加することが可能です。詳細な仕様や設定方法については、各ディレクトリ内のREADME.mdを参照してください。

| ディレクトリ | 役割の定義 |
| :--- | :--- |
| **redis/** | システムの心臓部となる共有メモリ空間（Redis）の構築と、ユニット間を繋ぐ共通ネットワークの定義を管理します。 |
| **muf/** | MUFの機能をプログラムから利用するためのSDKです。物理的な接続と監視を担うCore層と、GET命令などの通信手順を定めたProtocol層に分離されています。 |
| **monitor/** | 共有メモリの状態をリアルタイムで可視化するデバッグ専用ユニットです。メモリ上のフラグの変化やデータの更新を検知し、状態の遷移をコンソールにダンプします。 |

---

## 開発の基本フロー

MUFを用いたシステムの構築は、まず「redis」ディレクトリにおいて共通の仮想ネットワークを作成し、共有メモリ基盤を立ち上げることから始まります。基盤が動作した後は、各アプリケーションユニットを「muf」SDKを介して開発し、個別のコンテナとしてこの共通ネットワークに参加させます。開発の過程では「monitor」ユニットを常駐させることにより、メモリ上のフラグがパタパタと切り替わる様子や、データがどのように上書きされていくかを常に監視しながら、確実なデバッグを行うことができます。

---

## 今後の展望

現在はインフラとなるRedis基盤、通信を抽象化するSDK、そして状態を可視化するモニターユニットまでが整っています。今後は、実際にこの共有メモリに対して手動でデータを書き込み、システム全体の反応をテストするための「手動書き込みユニット」の実装や、使用済みメモリの自動清掃を行う「ガベージコレクション機能」の追加を予定しています。